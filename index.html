<!DOCTYPE html>
<html>
<head>
    <title>Игра пирамида </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/table.css"> -->
    
<script defer src="index.bundle.js"></script></head>
<body>

<div class = "header">
	<h3 class="head_font" align="center">Игра "Собери пирамидку"</h3>
</div>
<div class=" blur">
	<p>Правила игры:</p>
	<p>- В правой области будут появляться и падать колечки для сбора пирамиды</p>
	<p>- В зависимости от правил уровня вам потребуется собрать пирамиду по заданным правилам</p>
	<p>- Перетаскивать колечки в левую область с основой пирамиды можно драг-н-дропом</p>
	<p id = "winners" class = "winners">
	</p>
	<div class="table">
					<h3 class="title"> Уровни</h3>
					<p class="descr"> Это уровни с разными особенностями и сложностью</p>

					<div class="table__item">

						<div class="item__info ">
							<h4>Уровень 1</h4>
							<p>Для начинающих</p>
						</div>
						
						<a class="item__href" href=" ./level1.html"></a>
					</div>

					<div class="table__item">
						<div class="item__info ">
							<h4>Уровень 2</h4>
							<p>Уже посложнее</p>
						</div>
						
						<a class="item__href" href=" ./level2.html"></a>
					</div>

					<div class="table__item">
						<div class="item__info ">
							<h4>Уровень 3</h4>
							<p>Повышенная сложность</p>
						</div>
						
						<a class="item__href" href=" ./level3.html"></a>
					</div>


					<div class="table__item">
						<div class="item__info">
							<h4>Неизвестно</h4>
							<p>Вакантное место</p>
						</div>

					</div>
	</div>
	
	<script>

	// объект в json
	// var json = JSON.stringify(data);
	// var json2 = JSON.stringify(data2);	// {"name":"Hvosten","items":{"level1":1,"level2":1,"level3":2}}

	// json в объект
	// var obj = JSON.parse(json); // объект

	var datas = JSON.parse(localStorage.getItem('scores')) || {}
	
	//Когда получаем json- преобразуем его в объект, а дальше уже в зависимости от структуры данных
	

    console.log(datas)
    Object.keys(datas).forEach(name => {
        let header = '<h2>Gamer name ' + name + '</h2></br>';
		let list = '';

        datas[name].forEach((score, i) => {
            list += '<li>' + (i+1) + ': ' + (score ? score : 0) + ' очков. </li>';
        })

		document.getElementById('winners').innerHTML += header;
		document.getElementById('winners').innerHTML += '<ul>' + list + '</ul>';
    })

	// for (var j in datas){

	// 	var header = '<h2>Gamer name ' + data.name + '</h2>';
	// 	var list = '';

	// 	for (var i in data.items) {
	// 	  list += '<li>' + i + ': ' + data.items[i] + ' шт. </li>';
	// 	}

	// 	document.getElementById('winners').innerHTML += header;
	// 	document.getElementById('winners').innerHTML += '<ul>' + list + '</ul>';
    // }
	
	</script>
</div>
</body>
</html>